

function fillCountryCode(countryCode){
    console.log("fillCountryCode called");
    console.log("Country code : ", countryCode);
    document.getElementById("phoneNumber").value = countryCode;
}

function GenerateFlags(p){
    let flagsCSV = [
        ["Afghanistan","93","AFG"],
        ["Albania","355","ALB"],
        ["Algeria","213","DZA"],
        ["American Samoa","1-684","ASM"],
        ["Andorra","376","AND"],
        ["Angola","244","AGO"],
        ["Anguilla","1-264","AIA"],
        ["Antarctica","672","ATA"],
        ["Antigua and Barbuda","1-268","ATG"],
        ["Argentina","54","ARG"],
        ["Armenia","374","ARM"],
        ["Aruba","297","ABW"],
        ["Australia","61","AUS"],
        ["Austria","43","AUT"],
        ["Azerbaijan","994","AZE"],
        ["Bahamas","1-242","BHS"],
        ["Bahrain","973","BHR"],
        ["Bangladesh","880","BGD"],
        ["Barbados","1-246","BRB"],
        ["Belarus","375","BLR"],
        ["Belgium","32","BEL"],
        ["Belize","501","BLZ"],
        ["Benin","229","BEN"],
        ["Bermuda","1-441","BMU"],
        ["Bhutan","975","BTN"],
        ["Bolivia","591","BOL"],
        ["Bosnia and Herzegovina","387","BIH"],
        ["Botswana","267","BWA"],
        ["Brazil","55","BRA"],
        ["British Indian Ocean Territory","246","IOT"],
        ["British Virgin Islands","1-284","VGB"],
        ["Brunei","673","BRN"],
        ["Bulgaria","359","BGR"],
        ["Burkina Faso","226","BFA"],
        ["Burundi","257","BDI"],
        ["Cambodia","855","KHM"],
        ["Cameroon","237","CMR"],
        ["Canada","1","CAN"],
        ["Cape Verde","238","CPV"],
        ["Cayman Islands","1-345","CYM"],
        ["Central African Republic","236","CAF"],
        ["Chad","235","TCD"],
        ["Chile","56","CHL"],
        ["China","86","CHN"],
        ["Christmas Island","61","CXR"],
        ["Cocos Islands","61","CCK"],
        ["Colombia","57","COL"],
        ["Comoros","269","COM"],
        ["Cook Islands","682","COK"],
        ["Costa Rica","506","CRI"],
        ["Croatia","385","HRV"],
        ["Cuba","53","CUB"],
        ["Curacao","599","CUW"],
        ["Cyprus","357","CYP"],
        ["Czech Republic","420","CZE"],
        ["Democratic Republic of the Congo","243","COD"],
        ["Denmark","45","DNK"],
        ["Djibouti","253","DJI"],
        ["Dominica","1-767","DMA"],
        ["Dominican Republic","1-809","DOM"],
        ["East Timor","670","TLS"],
        ["Ecuador","593","ECU"],
        ["Egypt","20","EGY"],
        ["El Salvador","503","SLV"],
        ["Equatorial Guinea","240","GNQ"],
        ["Eritrea","291","ERI"],
        ["Estonia","372","EST"],
        ["Ethiopia","251","ETH"],
        ["Falkland Islands","500","FLK"],
        ["Faroe Islands","298","FRO"],
        ["Fiji","679","FJI"],
        ["Finland","358","FIN"],
        ["France","33","FRA"],
        ["French Polynesia","689","PYF"],
        ["Gabon","241","GAB"],
        ["Gambia","220","GMB"],
        ["Georgia","995","GEO"],
        ["Germany","49","DEU"],
        ["Ghana","233","GHA"],
        ["Gibraltar","350","GIB"],
        ["Greece","30","GRC"],
        ["Greenland","299","GRL"],
        ["Grenada","1-473","GRD"],
        ["Guam","1-671","GUM"],
        ["Guatemala","502","GTM"],
        ["Guernsey","44-1481","GGY"],
        ["Guinea","224","GIN"],
        ["Guinea-Bissau","245","GNB"],
        ["Guyana","592","GUY"],
        ["Haiti","509","HTI"],
        ["Honduras","504","HND"],
        ["Hong Kong","852","HKG"],
        ["Hungary","36","HUN"],
        ["Iceland","354","ISL"],
        ["India","91","IND"],
        ["Indonesia","62","IDN"],
        ["Iran","98","IRN"],
        ["Iraq","964","IRQ"],
        ["Ireland","353","IRL"],
        ["Isle of Man","44-1624","IMN"],
        ["Israel","972","ISR"],
        ["Italy","39","ITA"],
        ["Ivory Coast","225","CIV"],
        ["Jamaica","1-876","JAM"],
        ["Japan","81","JPN"],
        ["Jersey","44-1534","JEY"],
        ["Jordan","962","JOR"],
        ["Kazakhstan","7","KAZ"],
        ["Kenya","254","KEN"],
        ["Kiribati","686","KIR"],
        ["Kosovo","383","KOS"],
        ["Kuwait","965","KWT"],
        ["Kyrgyzstan","996","KGZ"],
        ["Laos","856","LAO"],
        ["Latvia","371","LVA"],
        ["Lebanon","961","LBN"],
        ["Lesotho","266","LSO"],
        ["Liberia","231","LBR"],
        ["Libya","218","LBY"],
        ["Liechtenstein","423","LIE"],
        ["Lithuania","370","LTU"],
        ["Luxembourg","352","LUX"],
        ["Macau","853","MAC"],
        ["Macedonia","389","MKD"],
        ["Madagascar","261","MDG"],
        ["Malawi","265","MWI"],
        ["Malaysia","60","MYS"],
        ["Maldives","960","MDV"],
        ["Mali","223","MLI"],
        ["Malta","356","MLT"],
        ["Marshall Islands","692","MHL"],
        ["Mauritania","222","MRT"],
        ["Mauritius","230","MUS"],
        ["Mayotte","262","MYT"],
        ["Mexico","52","MEX"],
        ["Micronesia","691","FSM"],
        ["Moldova","373","MDA"],
        ["Monaco","377","MCO"],
        ["Mongolia","976","MNG"],
        ["Montenegro","382","MNE"],
        ["Montserrat","1-664","MSR"],
        ["Morocco","212","MAR"],
        ["Mozambique","258","MOZ"],
        ["Myanmar","95","MMR"],
        ["Namibia","264","NAM"],
        ["Nauru","674","NRU"],
        ["Nepal","977","NPL"],
        ["Netherlands","31","NLD"],
        ["Netherlands Antilles","599","ANT"],
        ["New Caledonia","687","NCL"],
        ["New Zealand","64","NZL"],
        ["Nicaragua","505","NIC"],
        ["Niger","227","NER"],
        ["Nigeria","234","NGA"],
        ["Niue","683","NIU"],
        ["North Korea","850","PRK"],
        ["Northern Mariana Islands","1-670","MNP"],
        ["Norway","47","NOR"],
        ["Oman","968","OMN"],
        ["Pakistan","92","PAK"],
        ["Palau","680","PLW"],
        ["Palestine","970","PSE"],
        ["Panama","507","PAN"],
        ["Papua New Guinea","675","PNG"],
        ["Paraguay","595","PRY"],
        ["Peru","51","PER"],
        ["Philippines","63","PHL"],
        ["Pitcairn","64","PCN"],
        ["Poland","48","POL"],
        ["Portugal","351","PRT"],
        ["Puerto Rico","1-787","PRI"],
        ["Qatar","974","QAT"],
        ["Republic of the Congo","242","COG"],
        ["Reunion","262","REU"],
        ["Romania","40","ROU"],
        ["Russia","7","RUS"],
        ["Rwanda","250","RWA"],
        ["Saint Barthelemy","590","BLM"],
        ["Saint Helena","290","SHN"],
        ["Saint Kitts and Nevis","1-869","KNA"],
        ["Saint Lucia","1-758","LCA"],
        ["Saint Martin","590","MAF"],
        ["Saint Pierre and Miquelon","508","SPM"],
        ["Saint Vincent and the Grenadines","1-784","VCT"],
        ["Samoa","685","WSM"],
        ["San Marino","378","SMR"],
        ["Sao Tome and Principe","239","STP"],
        ["Saudi Arabia","966","SAU"],
        ["Senegal","221","SEN"],
        ["Serbia","381","SRB"],
        ["Seychelles","248","SYC"],
        ["Sierra Leone","232","SLE"],
        ["Singapore","65","SGP"],
        ["Sint Maarten","1-721","SXM"],
        ["Slovakia","421","SVK"],
        ["Slovenia","386","SVN"],
        ["Solomon Islands","677","SLB"],
        ["Somalia","252","SOM"],
        ["South Africa","27","ZAF"],
        ["South Korea","82","KOR"],
        ["South Sudan","211","SSD"],
        ["Spain","34","ESP"],
        ["Sri Lanka","94","LKA"],
        ["Sudan","249","SDN"],
        ["Suriname","597","SUR"],
        ["Svalbard and Jan Mayen","47","SJM"],
        ["Swaziland","268","SWZ"],
        ["Sweden","46","SWE"],
        ["Switzerland","41","CHE"],
        ["Syria","963","SYR"],
        ["Taiwan","886","TWN"],
        ["Tajikistan","992","TJK"],
        ["Tanzania","255","TZA"],
        ["Thailand","66","THA"],
        ["Togo","228","TGO"],
        ["Tokelau","690","TKL"],
        ["Tonga","676","TON"],
        ["Trinidad and Tobago","1-868","TTO"],
        ["Tunisia","216","TUN"],
        ["Turkey","90","TUR"],
        ["Turkmenistan","993","TKM"],
        ["Turks and Caicos Islands","1-649","TCA"],
        ["Tuvalu","688","TUV"],
        ["U.S. Virgin Islands","1-340","VIR"],
        ["Uganda","256","UGA"],
        ["Ukraine","380","UKR"],
        ["United Arab Emirates","971","ARE"],
        ["United Kingdom","44","GBR"],
        ["United States","1","USA"],
        ["Uruguay","598","URY"],
        ["Uzbekistan","998","UZB"],
        ["Vanuatu","678","VUT"],
        ["Vatican","379","VAT"],
        ["Venezuela","58","VEN"],
        ["Vietnam","84","VNM"],
        ["Wallis and Futuna","681","WLF"],
        ["Western Sahara","212","ESH"],
        ["Yemen","967","YEM"],
        ["Zambia","260","ZMB"],
        ["Zimbabwe","263","ZWE"]   
    ];

    return <div>
        {flagsCSV.map(function(flag, index) {    
            let countryNameLowerCase = flag[0].toLowerCase();
            let searchTerm = p.searchTerm;
            if(searchTerm != null){
                searchTerm = searchTerm.toLowerCase();
            }

            let resultsBoolean =    countryNameLowerCase.includes(searchTerm) ||
                                    flag[1].includes(searchTerm) ||
                                    ("+" + flag[1]).includes(searchTerm) ||
                                    searchTerm == null;

            return (resultsBoolean) && (
            <div className="countryItem" id={"countryItem" + index.toString()} onClick={fillCountryCode(flag[1])}>
                <span className={'flag-icon flag-icon-' + flag[2].toLowerCase()}></span>
                <span className="countryName">{flag[0]}</span>
                <span className="countryCode">{"(+" + flag[1] + ")"}</span>
            </div>
            )
        })}
    </div>
}

export default GenerateFlags